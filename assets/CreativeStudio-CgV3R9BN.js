import{h as s,a5 as M,a6 as Q,a7 as X,x as K,M as Y,_ as ee,J as T,a8 as U,a9 as ae,U as se,aa as re,q as e,G as _,ab as te,H as O,ac as oe,ad as le,ae as ie,I as ne,af as de,V as ce,C,Q as me}from"./index-2IpbhVEU.js";import{T as ue}from"./Textarea-gaIhsF-Z.js";import{I as xe}from"./Input-CRT_4c0B.js";import{S as ge,M as pe}from"./MediaActionsToolbar-DcojfTTc.js";import{d as fe}from"./useMediaActions-DZ7A1mgc.js";import{F as he}from"./VideoCameraIcon-DzEz4yVJ.js";import{F as P}from"./EyeIcon-D42TsC31.js";function be({title:r,titleId:x,...t},m){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":x},t),r?s.createElement("title",{id:x},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const ve=s.forwardRef(be);function je({title:r,titleId:x,...t},m){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":x},t),r?s.createElement("title",{id:x},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const ye=s.forwardRef(je),Le=()=>{const[r,x]=s.useState(""),[t,m]=s.useState("image"),[d,j]=s.useState(null),[u,y]=s.useState(null),[c,p]=s.useState(null),[h,A]=s.useState(null),[b,v]=s.useState(!1),[L,g]=s.useState(null),f=s.useRef(null),[I,$]=s.useState(M),[k,D]=s.useState(Q),[w,G]=s.useState(M),[N,V]=s.useState(X),[F,E]=s.useState(""),[we,Ne]=s.useState(""),{addToast:o}=K(),q="mock-user-123",z=a=>{x(a.basePrompt),m("image"),j(null),y(null),o({type:"info",title:"Template Aplicado",message:"Personalize o nome do produto no prompt."})},B=()=>{f.current&&f.current.click()},H=s.useCallback(a=>{var n;const l=(n=a.target.files)==null?void 0:n[0];if(!l)return;j(null),y(null),p(null),A(null),g(null),E("");const i=20;if(l.size>i*1024*1024){o({type:"error",title:"Arquivo muito grande",message:`MÃ¡ximo permitido: ${i}MB.`}),f.current&&(f.current.value="");return}if(!l.type.startsWith("image/")&&!l.type.startsWith("video/")){o({type:"error",title:"Formato invÃ¡lido",message:"Apenas imagens ou vÃ­deos."}),f.current&&(f.current.value="");return}j(l);try{const R=URL.createObjectURL(l);y(R)}catch(R){console.error("Error creating object URL",R),o({type:"error",message:"Erro ao visualizar arquivo."});return}E(l.name.split(".").slice(0,-1).join(".")),l.type.startsWith("image")?m("image"):l.type.startsWith("video")&&m("video")},[o]),S=(a,l)=>{const i=a instanceof Error?a.message:String(a);return i.includes("API key")?"Chave de API invÃ¡lida ou ausente.":i.includes("quota")||i.includes("429")?"Limite de uso da API excedido.":i.includes("safety")||i.includes("block")?"Bloqueado pelos filtros de seguranÃ§a.":`Falha em ${l}: ${i}`},W=s.useCallback(async()=>{if(!r.trim()){o({type:"warning",message:"Insira um prompt para gerar."}),g("A descriÃ§Ã£o (Prompt) Ã© obrigatÃ³ria.");return}v(!0),g(null),p(null),A(null);try{if(t==="image"){const a=await Y(r,{model:ee,aspectRatio:I,imageSize:k});if(!a.imageUrl)throw new Error("A API nÃ£o retornou imagem.");p(a.imageUrl)}else{const a=await T(r,{model:U,config:{numberOfVideos:1,resolution:N,aspectRatio:w}});if(!a)throw new Error("A API nÃ£o retornou vÃ­deo.");p(a)}E(`Gerado ${t} - ${r.substring(0,20)}...`),o({type:"success",title:"Sucesso",message:"MÃ­dia gerada com sucesso."})}catch(a){g(S(a,"geraÃ§Ã£o")),o({type:"error",message:"Erro na geraÃ§Ã£o."})}finally{v(!1)}},[r,t,I,k,w,N,o]),Z=s.useCallback(async()=>{if(!d||!u){o({type:"warning",message:"Carregue um arquivo para editar."});return}if(!r.trim()){o({type:"warning",message:"Descreva a ediÃ§Ã£o desejada."});return}v(!0),g(null),p(null);const a=new FileReader;a.onloadend=async()=>{if(typeof a.result!="string")return;const l=a.result.split(",")[1],i=d.type;try{if(t==="image"){const n=await ae(r,l,i,se);if(!n.imageUrl)throw new Error("Falha na ediÃ§Ã£o da imagem.");p(n.imageUrl)}else{const n=await T(r,{model:U,image:{imageBytes:l,mimeType:i},config:{resolution:N,aspectRatio:w}});if(!n)throw new Error("Falha na ediÃ§Ã£o do vÃ­deo.");p(n)}E(`Editado - ${r.substring(0,20)}`),o({type:"success",message:"EdiÃ§Ã£o concluÃ­da."})}catch(n){g(S(n,"ediÃ§Ã£o")),o({type:"error",message:"Erro na ediÃ§Ã£o."})}finally{v(!1)}},a.readAsDataURL(d)},[d,u,r,t,w,N,o]),J=s.useCallback(async()=>{if(!d){o({type:"warning",message:"Carregue um arquivo para analisar."});return}v(!0),g(null),A(null);const a=new FileReader;a.onloadend=async()=>{if(typeof a.result!="string")return;const l=a.result.split(",")[1],i=r.trim()||"Analise detalhadamente esta imagem/vÃ­deo.";try{const n=await re(l,d.type,i);A(n),o({type:"success",message:"AnÃ¡lise concluÃ­da."})}catch(n){g(S(n,"anÃ¡lise"))}finally{v(!1)}},a.readAsDataURL(d)},[d,r,o]);return s.useCallback(async()=>{c&&(await fe(c,`vitrinex-creative-${Date.now()}.png`)||o({type:"error",message:"Falha no download."}))},[c,o]),s.useEffect(()=>()=>{u&&URL.revokeObjectURL(u)},[u]),e.jsxs("div",{className:"container mx-auto py-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-title flex items-center gap-3",children:[e.jsx(_,{className:"w-8 h-8 text-primary"}),"EstÃºdio Criativo"]}),e.jsx("p",{className:"text-muted mt-1",children:"Crie, Edite e Analise mÃ­dias com o poder do Gemini 2.5 e Veo."})]})}),L&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Erro:"})," ",L]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-muted uppercase tracking-wider mb-3",children:"Modelos de Fim de Ano ðŸŽ„"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:te.map(a=>e.jsxs("button",{onClick:()=>z(a),className:"relative group overflow-hidden rounded-xl border border-border hover:border-primary transition-all text-left h-24",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-40 group-hover:opacity-60 transition-opacity duration-500",style:{backgroundImage:`url(${a.referenceImage})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),e.jsxs("div",{className:"relative p-3 z-10 flex flex-col justify-end h-full",children:[e.jsx("div",{className:"text-xl mb-1 filter drop-shadow-lg",children:a.icon}),e.jsx("div",{className:"text-xs font-bold text-white leading-tight drop-shadow-md",children:a.label})]})]},a.id))})]}),e.jsxs("div",{className:"bg-surface p-1 rounded-xl border border-border flex shadow-sm",children:[e.jsxs("button",{onClick:()=>{m("image"),j(null),y(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-all ${t==="image"?"bg-primary text-white shadow-md":"text-muted hover:text-title hover:bg-background"}`,children:[e.jsx(O,{className:"w-4 h-4"})," Imagem"]}),e.jsxs("button",{onClick:()=>{m("video"),j(null),y(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-all ${t==="video"?"bg-primary text-white shadow-md":"text-muted hover:text-title hover:bg-background"}`,children:[e.jsx(he,{className:"w-4 h-4"})," VÃ­deo"]})]}),e.jsxs("div",{onClick:B,className:`border-2 border-dashed rounded-2xl p-8 flex flex-col items-center justify-center transition-all cursor-pointer group relative overflow-hidden
              ${u?"border-primary/50 bg-primary/5":"border-border hover:border-primary hover:bg-background"}`,children:[e.jsx("input",{type:"file",ref:f,onChange:H,accept:t==="image"?"image/*":"video/*",className:"hidden"}),u?e.jsxs("div",{className:"relative w-full h-40 flex items-center justify-center",children:[t==="image"?e.jsx("img",{src:u,alt:"Preview",className:"max-h-full max-w-full object-contain rounded shadow-lg"}):e.jsx("video",{src:u,className:"max-h-full max-w-full rounded shadow-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity rounded",children:e.jsxs("p",{className:"text-white font-medium text-sm flex items-center gap-1",children:[e.jsx(oe,{className:"w-4 h-4"})," Trocar Arquivo"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-background rounded-full mb-3 shadow-sm group-hover:scale-110 transition-transform",children:e.jsx(le,{className:"w-8 h-8 text-primary"})}),e.jsxs("p",{className:"text-sm font-medium text-title",children:["Clique para carregar ",t==="image"?"uma Imagem":"um VÃ­deo"]}),e.jsx("p",{className:"text-xs text-muted mt-1",children:"ou arraste e solte aqui"})]})]}),e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-5 shadow-card",children:[e.jsxs("h3",{className:"text-sm font-bold text-title mb-4 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"})," ConfiguraÃ§Ãµes"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t==="image"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"ProporÃ§Ã£o"}),e.jsx("select",{value:I,onChange:a=>$(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:ie.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"Tamanho"}),e.jsx("select",{value:k,onChange:a=>D(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:ne.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"ProporÃ§Ã£o"}),e.jsx("select",{value:w,onChange:a=>G(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:de.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"ResoluÃ§Ã£o"}),e.jsx("select",{value:N,onChange:a=>V(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:ce.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})})]}),e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-5 shadow-card",children:[e.jsx(ue,{id:"creativePrompt",label:d?"InstruÃ§Ãµes de EdiÃ§Ã£o / AnÃ¡lise":"DescriÃ§Ã£o para GeraÃ§Ã£o",value:r,onChange:a=>x(a.target.value),rows:4,placeholder:d?"Ex: 'Adicione um filtro neon', 'Remova o fundo', 'Descreva a imagem'":"Ex: 'Um robÃ´ futurista em uma cidade cyberpunk'",className:"text-sm"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:d?e.jsxs(e.Fragment,{children:[e.jsxs(C,{onClick:Z,isLoading:b,variant:"primary",disabled:b,children:[e.jsx(ye,{className:"w-4 h-4 mr-2"})," Editar"]}),e.jsxs(C,{onClick:J,isLoading:b,variant:"outline",disabled:b,children:[e.jsx(P,{className:"w-4 h-4 mr-2"})," Analisar"]})]}):e.jsxs(C,{onClick:W,isLoading:b,variant:"primary",className:"col-span-2",children:[e.jsx(_,{className:"w-4 h-4 mr-2"})," Gerar ",t==="image"?"Imagem":"VÃ­deo"]})})]})]}),e.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full space-y-6",children:[e.jsx("div",{className:"flex-1 bg-surface rounded-2xl border border-border shadow-card overflow-hidden relative flex items-center justify-center min-h-[400px] bg-grid-pattern",children:b&&!c&&!h?e.jsxs("div",{className:"text-center",children:[e.jsx(me,{className:"w-12 h-12 text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted animate-pulse",children:"Processando com IA..."})]}):c?t==="image"?e.jsx("img",{src:c,alt:"Result",className:"max-w-full max-h-full object-contain shadow-2xl"}):e.jsx("video",{src:c,controls:!0,className:"max-w-full max-h-full shadow-2xl"}):h?e.jsxs("div",{className:"p-8 max-w-2xl w-full h-full overflow-y-auto",children:[e.jsxs("h3",{className:"text-xl font-bold text-title mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"w-6 h-6 text-primary"})," AnÃ¡lise Visual"]}),e.jsx("div",{className:"prose prose-invert max-w-none text-body bg-background/50 p-6 rounded-xl border border-border",children:h})]}):e.jsxs("div",{className:"text-center text-muted opacity-50",children:[e.jsx(O,{className:"w-20 h-20 mx-auto mb-2"}),e.jsx("p",{children:"O resultado aparecerÃ¡ aqui"})]})}),(c||h)&&e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-4 shadow-card flex flex-col md:flex-row items-center justify-between gap-4 animate-slide-in-from-bottom",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsx(xe,{id:"saveName",placeholder:"Nome para salvar...",value:F,onChange:a=>E(a.target.value),className:"mb-0"})}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsx(ge,{content:c||h,type:h?"text":t,userId:q,initialName:F,tags:["creative-studio",t],variant:"secondary",className:"w-full md:w-auto"}),c&&e.jsx(pe,{mediaUrl:c,fileName:"creative.png"})]})]})]})]})]})};export{Le as default};
