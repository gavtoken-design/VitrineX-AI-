import{h as c,x as I,q as t,C as b,ag as L,ah as f,ac as N,ai as B}from"./index-2IpbhVEU.js";import{u as h,a as C}from"./useMediaActions-DZ7A1mgc.js";function T({title:a,titleId:e,...o},d){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":e},o),a?c.createElement("title",{id:e},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"}))}const y=c.forwardRef(T),D=({content:a,type:e,userId:o,initialName:d="Sem TÃ­tulo",tags:l=[],onSave:w,className:n="",variant:S="secondary",label:j="Salvar na Biblioteca",disabled:F=!1})=>{const[$,g]=c.useState(!1),[m,v]=c.useState(!1),{addToast:x}=I(),k=async()=>{if(a){g(!0);try{let s;const i=d||`Salvo ${e} ${Date.now()}`;if(a instanceof File||a instanceof Blob){const r=a instanceof File?a:new File([a],i,{type:e==="image"?"image/png":e==="video"?"video/mp4":"text/plain"});s={...await h(r,o,e),name:i,tags:l},await f(s)}else if(e==="text"||e==="post"||e==="ad"){const r=new Blob([a],{type:"text/plain"}),u=new File([r],`${i}.txt`,{type:"text/plain"});s={...await h(u,o,e),name:i,tags:l},await f(s)}else if(a.startsWith("data:")){const u=await(await fetch(a)).blob(),p=e==="image"?"png":"mp4",A=new File([u],`${i}.${p}`,{type:u.type});s={...await h(A,o,e),name:i,tags:l},await f(s)}else{const r={id:`lib-${Date.now()}`,userId:o,type:e,file_url:a,thumbnail_url:a,tags:l,name:i,createdAt:new Date().toISOString()};await f(r),s=r}v(!0),w&&w(s),setTimeout(()=>v(!1),3e3),x({type:"success",message:"Item salvo na biblioteca!"})}catch(s){console.error("Error saving to library:",s),x({type:"error",title:"Erro",message:"Falha ao salvar na biblioteca."})}finally{g(!1)}}};return t.jsxs(b,{onClick:k,isLoading:$,variant:m?"outline":S,className:`${m?"border-green-500 text-green-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20":""} ${n}`,disabled:F||m||!a,children:[m?t.jsx(L,{className:"w-5 h-5 mr-2"}):t.jsx(y,{className:"w-5 h-5 mr-2"}),m?"Salvo!":j]})},M=({mediaUrl:a,fileName:e,shareTitle:o="Criativo da VitrineX AI",shareText:d="Confira este criativo que gerei com a VitrineX AI!"})=>{const{handleDownload:l,handleShare:w,isProcessing:n}=C();return t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs(b,{onClick:()=>a&&l(a,e),variant:"primary",className:"w-full sm:w-auto",disabled:!a||n,isLoading:n,children:[t.jsx(N,{className:"w-4 h-4 mr-2"}),"Baixar"]}),t.jsxs(b,{onClick:()=>a&&w(a,o,d),variant:"secondary",className:"w-full sm:w-auto",disabled:!a||n,isLoading:n,children:[t.jsx(B,{className:"w-4 h-4 mr-2"}),"Compartilhar"]})]})};export{M,D as S};
