import{_ as r,b as u,ac as k,ag as A,S as c,J as C,ah as F,ai as w}from"./index-Di1jv5f6.js";import{g as I,p}from"./useMediaActions-DZ7A1mgc-VCjv--Wh.js";function L({title:e,titleId:a,...s},m){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":a},s),e?c.createElement("title",{id:a},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"}))}const T=c.forwardRef(L),E=({content:e,type:a,userId:s,initialName:m="Sem TÃ­tulo",tags:l=[],onSave:g,className:o="",variant:x="secondary",label:y="Salvar na Biblioteca",disabled:N=!1})=>{const[S,f]=c.useState(!1),[d,b]=c.useState(!1),{addToast:v}=C(),j=async()=>{if(e){f(!0);try{let t;const n=m||`Salvo ${a} ${Date.now()}`;if(e instanceof File||e instanceof Blob){const i=e instanceof File?e:new File([e],n,{type:a==="image"?"image/png":a==="video"?"video/mp4":"text/plain"});t={...await p(i,s,a),name:n,tags:l},await w(t)}else if(a==="text"||a==="post"||a==="ad"){const i=new Blob([e],{type:"text/plain"}),h=new File([i],`${n}.txt`,{type:"text/plain"});t={...await p(h,s,a),name:n,tags:l},await w(t)}else if(e.startsWith("data:")){const i=await(await fetch(e)).blob(),h=a==="image"?"png":"mp4",$=new File([i],`${n}.${h}`,{type:i.type});t={...await p($,s,a),name:n,tags:l},await w(t)}else{const i={id:`lib-${Date.now()}`,userId:s,type:a,file_url:e,thumbnail_url:e,tags:l,name:n,createdAt:new Date().toISOString()};await w(i),t=i}b(!0),g&&g(t),setTimeout(()=>b(!1),3e3),v({type:"success",message:"Item salvo na biblioteca!"})}catch(t){console.error("Error saving to library:",t),v({type:"error",title:"Erro",message:"Falha ao salvar na biblioteca."})}finally{f(!1)}}};return r.jsxs(u,{onClick:j,isLoading:S,variant:d?"outline":x,className:`${d?"border-green-500 text-green-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20":""} ${o}`,disabled:N||d||!e,children:[d?r.jsx(F,{className:"w-5 h-5 mr-2"}):r.jsx(T,{className:"w-5 h-5 mr-2"}),d?"Salvo!":y]})},V=({mediaUrl:e,fileName:a,shareTitle:s="Criativo da VitrineX AI",shareText:m="Confira este criativo que gerei com a VitrineX AI!"})=>{const{handleDownload:l,handleShare:g,isProcessing:o}=I();return r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs(u,{onClick:()=>e&&l(e,a),variant:"primary",className:"w-full sm:w-auto",disabled:!e||o,isLoading:o,children:[r.jsx(k,{className:"w-4 h-4 mr-2"}),"Baixar"]}),r.jsxs(u,{onClick:()=>e&&g(e,s,m),variant:"secondary",className:"w-full sm:w-auto",disabled:!e||o,isLoading:o,children:[r.jsx(A,{className:"w-4 h-4 mr-2"}),"Compartilhar"]})]})};export{E as D,V as M};
