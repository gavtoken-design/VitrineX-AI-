import{S as r,a5 as F,a6 as X,a7 as _,J as K,G as Y,V as ee,C as P,a8 as U,a9 as ae,N as re,aa as se,_ as e,v as q,ab as te,w as M,ac as le,ad as ie,ae as oe,x as ne,af as de,y as ce,b as R,t as me}from"./index-Di1jv5f6.js";import{m as ue}from"./Textarea-gaIhsF-Z-OB2gT--i.js";import{n as xe}from"./Input-CRT_4c0B-CcXoGhNA.js";import{D as ge,M as pe}from"./MediaActionsToolbar-DcojfTTc-4KYaUHh3.js";import{f as he}from"./useMediaActions-DZ7A1mgc-VCjv--Wh.js";import{s as fe}from"./VideoCameraIcon-DzEz4yVJ-BIUd7_x6.js";import{s as V}from"./EyeIcon-D42TsC31-DQUOi4CA.js";function be({title:t,titleId:x,...l},c){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":x},l),t?r.createElement("title",{id:x},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const ve=r.forwardRef(be);function je({title:t,titleId:x,...l},c){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":x},l),t?r.createElement("title",{id:x},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const ye=r.forwardRef(je),Ie=()=>{const[t,x]=r.useState(""),[l,c]=r.useState("image"),[n,j]=r.useState(null),[m,y]=r.useState(null),[d,p]=r.useState(null),[f,A]=r.useState(null),[b,v]=r.useState(!1),[I,g]=r.useState(null),h=r.useRef(null),[C,D]=r.useState(F),[E,W]=r.useState(X),[w,z]=r.useState(F),[N,B]=r.useState(_),[$,k]=r.useState(""),[we,Ne]=r.useState(""),{addToast:i}=K(),G="mock-user-123",O=a=>{x(a.basePrompt),c("image"),j(null),y(null),i({type:"info",title:"Template Aplicado",message:"Personalize o nome do produto no prompt."})},T=()=>{h.current&&h.current.click()},H=r.useCallback(a=>{var u;const s=(u=a.target.files)==null?void 0:u[0];if(!s)return;j(null),y(null),p(null),A(null),g(null),k("");const o=20;if(s.size>o*1024*1024){i({type:"error",title:"Arquivo muito grande",message:`MÃ¡ximo permitido: ${o}MB.`}),h.current&&(h.current.value="");return}if(!s.type.startsWith("image/")&&!s.type.startsWith("video/")){i({type:"error",title:"Formato invÃ¡lido",message:"Apenas imagens ou vÃ­deos."}),h.current&&(h.current.value="");return}j(s);try{const L=URL.createObjectURL(s);y(L)}catch(L){console.error("Error creating object URL",L),i({type:"error",message:"Erro ao visualizar arquivo."});return}k(s.name.split(".").slice(0,-1).join(".")),s.type.startsWith("image")?c("image"):s.type.startsWith("video")&&c("video")},[i]),S=(a,u)=>{const s=a instanceof Error?a.message:String(a);return s.includes("API key")?"Chave de API invÃ¡lida ou ausente.":s.includes("quota")||s.includes("429")?"Limite de uso da API excedido.":s.includes("safety")||s.includes("block")?"Bloqueado pelos filtros de seguranÃ§a.":`Falha em ${u}: ${s}`},J=r.useCallback(async()=>{if(!t.trim()){i({type:"warning",message:"Insira um prompt para gerar."}),g("A descriÃ§Ã£o (Prompt) Ã© obrigatÃ³ria.");return}v(!0),g(null),p(null),A(null);try{if(l==="image"){const a=await Y(t,{model:ee,aspectRatio:C,imageSize:E});if(!a.imageUrl)throw new Error("A API nÃ£o retornou imagem.");p(a.imageUrl)}else{const a=await P(t,{model:U,config:{numberOfVideos:1,resolution:N,aspectRatio:w}});if(!a)throw new Error("A API nÃ£o retornou vÃ­deo.");p(a)}k(`Gerado ${l} - ${t.substring(0,20)}...`),i({type:"success",title:"Sucesso",message:"MÃ­dia gerada com sucesso."})}catch(a){g(S(a,"geraÃ§Ã£o")),i({type:"error",message:"Erro na geraÃ§Ã£o."})}finally{v(!1)}},[t,l,C,E,w,N,i]),Z=r.useCallback(async()=>{if(!n||!m){i({type:"warning",message:"Carregue um arquivo para editar."});return}if(!t.trim()){i({type:"warning",message:"Descreva a ediÃ§Ã£o desejada."});return}v(!0),g(null),p(null);const a=new FileReader;a.onloadend=async()=>{if(typeof a.result!="string")return;const u=a.result.split(",")[1],s=n.type;try{if(l==="image"){const o=await ae(t,u,s,re);if(!o.imageUrl)throw new Error("Falha na ediÃ§Ã£o da imagem.");p(o.imageUrl)}else{const o=await P(t,{model:U,image:{imageBytes:u,mimeType:s},config:{resolution:N,aspectRatio:w}});if(!o)throw new Error("Falha na ediÃ§Ã£o do vÃ­deo.");p(o)}k(`Editado - ${t.substring(0,20)}`),i({type:"success",message:"EdiÃ§Ã£o concluÃ­da."})}catch(o){g(S(o,"ediÃ§Ã£o")),i({type:"error",message:"Erro na ediÃ§Ã£o."})}finally{v(!1)}},a.readAsDataURL(n)},[n,m,t,l,w,N,i]),Q=r.useCallback(async()=>{if(!n){i({type:"warning",message:"Carregue um arquivo para analisar."});return}v(!0),g(null),A(null);const a=new FileReader;a.onloadend=async()=>{if(typeof a.result!="string")return;const u=a.result.split(",")[1],s=t.trim()||"Analise detalhadamente esta imagem/vÃ­deo.";try{const o=await se(u,n.type,s);A(o),i({type:"success",message:"AnÃ¡lise concluÃ­da."})}catch(o){g(S(o,"anÃ¡lise"))}finally{v(!1)}},a.readAsDataURL(n)},[n,t,i]);return r.useCallback(async()=>{d&&(await he(d,`vitrinex-creative-${Date.now()}.png`)||i({type:"error",message:"Falha no download."}))},[d,i]),r.useEffect(()=>()=>{m&&URL.revokeObjectURL(m)},[m]),e.jsxs("div",{className:"container mx-auto py-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-title flex items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 text-primary"}),"EstÃºdio Criativo"]}),e.jsx("p",{className:"text-muted mt-1",children:"Crie, Edite e Analise mÃ­dias com o poder do Gemini 2.5 e Veo."})]})}),I&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Erro:"})," ",I]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-muted uppercase tracking-wider mb-3",children:"Modelos de Fim de Ano ðŸŽ„"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:te.map(a=>e.jsxs("button",{onClick:()=>O(a),className:"relative group overflow-hidden rounded-xl border border-border hover:border-primary transition-all text-left h-24",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-40 group-hover:opacity-60 transition-opacity duration-500",style:{backgroundImage:`url(${a.referenceImage})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),e.jsxs("div",{className:"relative p-3 z-10 flex flex-col justify-end h-full",children:[e.jsx("div",{className:"text-xl mb-1 filter drop-shadow-lg",children:a.icon}),e.jsx("div",{className:"text-xs font-bold text-white leading-tight drop-shadow-md",children:a.label})]})]},a.id))})]}),e.jsxs("div",{className:"bg-surface p-1 rounded-xl border border-border flex shadow-sm",children:[e.jsxs("button",{onClick:()=>{c("image"),j(null),y(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-all ${l==="image"?"bg-primary text-white shadow-md":"text-muted hover:text-title hover:bg-background"}`,children:[e.jsx(M,{className:"w-4 h-4"})," Imagem"]}),e.jsxs("button",{onClick:()=>{c("video"),j(null),y(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-all ${l==="video"?"bg-primary text-white shadow-md":"text-muted hover:text-title hover:bg-background"}`,children:[e.jsx(fe,{className:"w-4 h-4"})," VÃ­deo"]})]}),e.jsxs("div",{onClick:T,className:`border-2 border-dashed rounded-2xl p-8 flex flex-col items-center justify-center transition-all cursor-pointer group relative overflow-hidden
              ${m?"border-primary/50 bg-primary/5":"border-border hover:border-primary hover:bg-background"}`,children:[e.jsx("input",{type:"file",ref:h,onChange:H,accept:l==="image"?"image/*":"video/*",className:"hidden"}),m?e.jsxs("div",{className:"relative w-full h-40 flex items-center justify-center",children:[l==="image"?e.jsx("img",{src:m,alt:"Preview",className:"max-h-full max-w-full object-contain rounded shadow-lg"}):e.jsx("video",{src:m,className:"max-h-full max-w-full rounded shadow-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity rounded",children:e.jsxs("p",{className:"text-white font-medium text-sm flex items-center gap-1",children:[e.jsx(le,{className:"w-4 h-4"})," Trocar Arquivo"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-background rounded-full mb-3 shadow-sm group-hover:scale-110 transition-transform",children:e.jsx(ie,{className:"w-8 h-8 text-primary"})}),e.jsxs("p",{className:"text-sm font-medium text-title",children:["Clique para carregar ",l==="image"?"uma Imagem":"um VÃ­deo"]}),e.jsx("p",{className:"text-xs text-muted mt-1",children:"ou arraste e solte aqui"})]})]}),e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-5 shadow-card",children:[e.jsxs("h3",{className:"text-sm font-bold text-title mb-4 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"})," ConfiguraÃ§Ãµes"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:l==="image"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"ProporÃ§Ã£o"}),e.jsx("select",{value:C,onChange:a=>D(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:oe.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"Tamanho"}),e.jsx("select",{value:E,onChange:a=>W(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:ne.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"ProporÃ§Ã£o"}),e.jsx("select",{value:w,onChange:a=>z(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:de.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"ResoluÃ§Ã£o"}),e.jsx("select",{value:N,onChange:a=>B(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:ce.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})})]}),e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-5 shadow-card",children:[e.jsx(ue,{id:"creativePrompt",label:n?"InstruÃ§Ãµes de EdiÃ§Ã£o / AnÃ¡lise":"DescriÃ§Ã£o para GeraÃ§Ã£o",value:t,onChange:a=>x(a.target.value),rows:4,placeholder:n?"Ex: 'Adicione um filtro neon', 'Remova o fundo', 'Descreva a imagem'":"Ex: 'Um robÃ´ futurista em uma cidade cyberpunk'",className:"text-sm"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:n?e.jsxs(e.Fragment,{children:[e.jsxs(R,{onClick:Z,isLoading:b,variant:"primary",disabled:b,children:[e.jsx(ye,{className:"w-4 h-4 mr-2"})," Editar"]}),e.jsxs(R,{onClick:Q,isLoading:b,variant:"outline",disabled:b,children:[e.jsx(V,{className:"w-4 h-4 mr-2"})," Analisar"]})]}):e.jsxs(R,{onClick:J,isLoading:b,variant:"primary",className:"col-span-2",children:[e.jsx(q,{className:"w-4 h-4 mr-2"})," Gerar ",l==="image"?"Imagem":"VÃ­deo"]})})]})]}),e.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full space-y-6",children:[e.jsx("div",{className:"flex-1 bg-surface rounded-2xl border border-border shadow-card overflow-hidden relative flex items-center justify-center min-h-[400px] bg-grid-pattern",children:b&&!d&&!f?e.jsxs("div",{className:"text-center",children:[e.jsx(me,{className:"w-12 h-12 text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted animate-pulse",children:"Processando com IA..."})]}):d?l==="image"?e.jsx("img",{src:d,alt:"Result",className:"max-w-full max-h-full object-contain shadow-2xl"}):e.jsx("video",{src:d,controls:!0,className:"max-w-full max-h-full shadow-2xl"}):f?e.jsxs("div",{className:"p-8 max-w-2xl w-full h-full overflow-y-auto",children:[e.jsxs("h3",{className:"text-xl font-bold text-title mb-4 flex items-center gap-2",children:[e.jsx(V,{className:"w-6 h-6 text-primary"})," AnÃ¡lise Visual"]}),e.jsx("div",{className:"prose prose-invert max-w-none text-body bg-background/50 p-6 rounded-xl border border-border",children:f})]}):e.jsxs("div",{className:"text-center text-muted opacity-50",children:[e.jsx(M,{className:"w-20 h-20 mx-auto mb-2"}),e.jsx("p",{children:"O resultado aparecerÃ¡ aqui"})]})}),(d||f)&&e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-4 shadow-card flex flex-col md:flex-row items-center justify-between gap-4 animate-slide-in-from-bottom",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsx(xe,{id:"saveName",placeholder:"Nome para salvar...",value:$,onChange:a=>k(a.target.value),className:"mb-0"})}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsx(ge,{content:d||f,type:f?"text":l,userId:G,initialName:$,tags:["creative-studio",l],variant:"secondary",className:"w-full md:w-auto"}),d&&e.jsx(pe,{mediaUrl:d,fileName:"creative.png"})]})]})]})]})]})};export{Ie as default};
