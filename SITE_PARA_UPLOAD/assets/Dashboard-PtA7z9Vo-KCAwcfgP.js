import{z as Ee,f as Ie,J as Se,P as Ae,S as N,_ as i,a as fe,F as ge,l as Te,d as me,b as T,i as We,R as Me,Y as qe,A as Ne,r as ne,K as Fe,m as oe,c as Pe,u as Ue,g as De,e as Le,h as Qe,Q as be,O as C,W as de,j as H,n as ze,k as ye,B as ve,q as Be,o as K,p as He}from"./index-Di1jv5f6.js";var Oe=e=>{throw TypeError(e)},he=(e,t,a)=>t.has(e)||Oe("Cannot "+a),s=(e,t,a)=>(he(e,t,"read from private field"),a?a.call(e):t.get(e)),b=(e,t,a)=>t.has(e)?Oe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),c=(e,t,a,r)=>(he(e,t,"write to private field"),t.set(e,a),a),g=(e,t,a)=>(he(e,t,"access private method"),a),v,n,Y,y,F,D,S,W,$,L,Q,P,U,M,z,p,B,Z,ee,te,se,ae,ie,re,xe,we,Ge=(we=class extends Qe{constructor(e,t){super(),b(this,p),b(this,v),b(this,n),b(this,Y),b(this,y),b(this,F),b(this,D),b(this,S),b(this,W),b(this,$),b(this,L),b(this,Q),b(this,P),b(this,U),b(this,M),b(this,z,new Set),this.options=t,c(this,v,e),c(this,W,null),c(this,S,be()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,n).addObserver(this),ke(s(this,n),this.options)?g(this,p,B).call(this):this.updateResult(),g(this,p,se).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return le(s(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return le(s(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,g(this,p,ae).call(this),g(this,p,ie).call(this),s(this,n).removeObserver(this)}setOptions(e){const t=this.options,a=s(this,n);if(this.options=s(this,v).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof C(this.options.enabled,s(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");g(this,p,re).call(this),s(this,n).setOptions(this.options),t._defaulted&&!de(this.options,t)&&s(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,n),observer:this});const r=this.hasListeners();r&&je(s(this,n),a,this.options,t)&&g(this,p,B).call(this),this.updateResult(),r&&(s(this,n)!==a||C(this.options.enabled,s(this,n))!==C(t.enabled,s(this,n))||H(this.options.staleTime,s(this,n))!==H(t.staleTime,s(this,n)))&&g(this,p,Z).call(this);const u=g(this,p,ee).call(this);r&&(s(this,n)!==a||C(this.options.enabled,s(this,n))!==C(t.enabled,s(this,n))||u!==s(this,M))&&g(this,p,te).call(this,u)}getOptimisticResult(e){const t=s(this,v).getQueryCache().build(s(this,v),e),a=this.createResult(t,e);return Ke(this,a)&&(c(this,y,a),c(this,D,this.options),c(this,F,s(this,n).state)),a}getCurrentResult(){return s(this,y)}trackResult(e,t){return new Proxy(e,{get:(a,r)=>(this.trackProp(r),t==null||t(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&s(this,S).status==="pending"&&s(this,S).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,r))})}trackProp(e){s(this,z).add(e)}getCurrentQuery(){return s(this,n)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=s(this,v).defaultQueryOptions(e),a=s(this,v).getQueryCache().build(s(this,v),t);return a.fetch().then(()=>this.createResult(a,t))}fetch(e){return g(this,p,B).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,y)))}createResult(e,t){var a;const r=s(this,n),u=this.options,h=s(this,y),d=s(this,F),j=s(this,D),_=e!==r?e.state:s(this,Y),{state:R}=e;let o={...R},l=!1,f;if(t._optimisticResults){const k=this.hasListeners(),G=!k&&ke(e,t),q=k&&je(e,r,t,u);(G||q)&&(o={...o,...ze(R.data,e.options)}),t._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:m,errorUpdatedAt:x,status:w}=o;f=o.data;let E=!1;if(t.placeholderData!==void 0&&f===void 0&&w==="pending"){let k;h!=null&&h.isPlaceholderData&&t.placeholderData===(j==null?void 0:j.placeholderData)?(k=h.data,E=!0):k=typeof t.placeholderData=="function"?t.placeholderData((a=s(this,Q))==null?void 0:a.state.data,s(this,Q)):t.placeholderData,k!==void 0&&(w="success",f=ye(h==null?void 0:h.data,k,t),l=!0)}if(t.select&&f!==void 0&&!E)if(h&&f===(d==null?void 0:d.data)&&t.select===s(this,$))f=s(this,L);else try{c(this,$,t.select),f=t.select(f),f=ye(h==null?void 0:h.data,f,t),c(this,L,f),c(this,W,null)}catch(k){c(this,W,k)}s(this,W)&&(m=s(this,W),f=s(this,L),x=Date.now(),w="error");const A=o.fetchStatus==="fetching",I=w==="pending",V=w==="error",ue=I&&A,pe=f!==void 0,O={status:w,fetchStatus:o.fetchStatus,isPending:I,isSuccess:w==="success",isError:V,isInitialLoading:ue,isLoading:ue,data:f,dataUpdatedAt:o.dataUpdatedAt,error:m,errorUpdatedAt:x,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>_.dataUpdateCount||o.errorUpdateCount>_.errorUpdateCount,isFetching:A,isRefetching:A&&!I,isLoadingError:V&&!pe,isPaused:o.fetchStatus==="paused",isPlaceholderData:l,isRefetchError:V&&pe,isStale:ce(e,t),refetch:this.refetch,promise:s(this,S),isEnabled:C(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=J=>{O.status==="error"?J.reject(O.error):O.data!==void 0&&J.resolve(O.data)},G=()=>{const J=c(this,S,O.promise=be());k(J)},q=s(this,S);switch(q.status){case"pending":e.queryHash===r.queryHash&&k(q);break;case"fulfilled":(O.status==="error"||O.data!==q.value)&&G();break;case"rejected":(O.status!=="error"||O.error!==q.reason)&&G();break}}return O}updateResult(){const e=s(this,y),t=this.createResult(s(this,n),this.options);if(c(this,F,s(this,n).state),c(this,D,this.options),s(this,F).data!==void 0&&c(this,Q,s(this,n)),de(t,e))return;c(this,y,t);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,u=typeof r=="function"?r():r;if(u==="all"||!u&&!s(this,z).size)return!0;const h=new Set(u??s(this,z));return this.options.throwOnError&&h.add("error"),Object.keys(s(this,y)).some(d=>{const j=d;return s(this,y)[j]!==e[j]&&h.has(j)})};g(this,p,xe).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&g(this,p,se).call(this)}},v=new WeakMap,n=new WeakMap,Y=new WeakMap,y=new WeakMap,F=new WeakMap,D=new WeakMap,S=new WeakMap,W=new WeakMap,$=new WeakMap,L=new WeakMap,Q=new WeakMap,P=new WeakMap,U=new WeakMap,M=new WeakMap,z=new WeakMap,p=new WeakSet,B=function(e){g(this,p,re).call(this);let t=s(this,n).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ne)),t},Z=function(){g(this,p,ae).call(this);const e=H(this.options.staleTime,s(this,n));if(oe||s(this,y).isStale||!ve(e))return;const t=Be(s(this,y).dataUpdatedAt,e)+1;c(this,P,K.setTimeout(()=>{s(this,y).isStale||this.updateResult()},t))},ee=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,n)):this.options.refetchInterval)??!1},te=function(e){g(this,p,ie).call(this),c(this,M,e),!(oe||C(this.options.enabled,s(this,n))===!1||!ve(s(this,M))||s(this,M)===0)&&c(this,U,K.setInterval(()=>{(this.options.refetchIntervalInBackground||He.isFocused())&&g(this,p,B).call(this)},s(this,M)))},se=function(){g(this,p,Z).call(this),g(this,p,te).call(this,g(this,p,ee).call(this))},ae=function(){s(this,P)&&(K.clearTimeout(s(this,P)),c(this,P,void 0))},ie=function(){s(this,U)&&(K.clearInterval(s(this,U)),c(this,U,void 0))},re=function(){const e=s(this,v).getQueryCache().build(s(this,v),this.options);if(e===s(this,n))return;const t=s(this,n);c(this,n,e),c(this,Y,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},xe=function(e){Ne.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(s(this,y))}),s(this,v).getQueryCache().notify({query:s(this,n),type:"observerResultsUpdated"})})},we);function Je(e,t){return C(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ke(e,t){return Je(e,t)||e.state.data!==void 0&&le(e,t,t.refetchOnMount)}function le(e,t,a){if(C(t.enabled,e)!==!1&&H(t.staleTime,e)!=="static"){const r=typeof a=="function"?a(e):a;return r==="always"||r!==!1&&ce(e,t)}return!1}function je(e,t,a,r){return(e!==t||C(r.enabled,e)===!1)&&(!a.suspense||e.state.status!=="error")&&ce(e,a)}function ce(e,t){return C(t.enabled,e)!==!1&&e.isStaleByTime(H(t.staleTime,e))}function Ke(e,t){return!de(e.getCurrentResult(),t)}var _e=N.createContext(!1),Ye=()=>N.useContext(_e);_e.Provider;function $e(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Xe=N.createContext($e()),Ve=()=>N.useContext(Xe),Ze=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},et=e=>{N.useEffect(()=>{e.clearReset()},[e])},tt=({result:e,errorResetBoundary:t,throwOnError:a,query:r,suspense:u})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(u&&e.data===void 0||Fe(a,[e.error,r])),st=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...r)=>t(a(...r)):t(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},at=(e,t)=>e.isLoading&&e.isFetching&&!t,it=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Re=(e,t,a)=>t.fetchOptimistic(e).catch(()=>{a.clearReset()});function rt(e,t,a){var r,u,h,d,j;const _=Ye(),R=Ve(),o=qe(),l=o.defaultQueryOptions(e);(u=(r=o.getDefaultOptions().queries)==null?void 0:r._experimental_beforeQuery)==null||u.call(r,l),l._optimisticResults=_?"isRestoring":"optimistic",st(l),Ze(l,R),et(R);const f=!o.getQueryCache().get(l.queryHash),[m]=N.useState(()=>new t(o,l)),x=m.getOptimisticResult(l),w=!_&&e.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(E=>{const A=w?m.subscribe(Ne.batchCalls(E)):ne;return m.updateResult(),A},[m,w]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),N.useEffect(()=>{m.setOptions(l)},[l,m]),it(l,x))throw Re(l,m,R);if(tt({result:x,errorResetBoundary:R,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw x.error;if((d=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||d.call(h,l,x),l.experimental_prefetchInRender&&!oe&&at(x,_)){const E=f?Re(l,m,R):(j=o.getQueryCache().get(l.queryHash))==null?void 0:j.promise;E==null||E.catch(ne).finally(()=>{m.updateResult()})}return l.notifyOnChangeProps?x:m.trackResult(x)}function nt(e,t){return rt(e,Ge)}const ot={dashboard:"dashboard"},dt=e=>nt({queryKey:[ot.dashboard,e],queryFn:async()=>{const[t,a,r,u]=await Promise.all([Pe(e),Ue(e),De(e),Le(e)]);return{posts:t,ads:a,schedule:r,trends:u}}}),Ce=({className:e=""})=>i.jsx("div",{className:`animate-pulse bg-gray-200 dark:bg-gray-800 rounded ${e}`}),X=({title:e,value:t,description:a,icon:r,isLoading:u})=>i.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-card border border-gray-100 dark:border-gray-800 hover:shadow-soft transition-all duration-300",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"w-full",children:[i.jsx("p",{className:"text-sm font-medium text-muted",children:e}),u?i.jsx(Ce,{className:"h-9 w-16 mt-1"}):i.jsx("p",{className:"text-3xl font-bold text-title mt-1 tracking-tight animate-fade-in",children:t})]}),i.jsx("div",{className:"p-2.5 bg-background rounded-lg text-primary",children:i.jsx(r,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"flex items-center",children:u?i.jsx(Ce,{className:"h-4 w-32"}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs font-medium text-success bg-success/10 px-2 py-0.5 rounded-full mr-2",children:"Active"}),i.jsx("p",{className:"text-xs text-muted",children:a})]})})]}),ht=()=>{const e="mock-user-123",{data:t,isLoading:a,isError:r,error:u}=dt(e),{navigateTo:h}=Ee(),{t:d,language:j}=Ie(),{addToast:_}=Se(),{startTutorial:R,hasSeenTutorial:o}=Ae(),[l,f]=N.useState(!1),m=(t==null?void 0:t.posts.length)||0,x=(t==null?void 0:t.ads.length)||0,w=(t==null?void 0:t.schedule.filter(I=>new Date(I.datetime)>new Date).length)||0,E=(t==null?void 0:t.trends.length)||0;N.useEffect(()=>{o||R([{targetId:"dashboard-header",title:"Bem-vindo ao VitrineX AI! ðŸš€",content:"Este Ã© o seu painel de controle. Aqui vocÃª tem uma visÃ£o geral de toda a sua operaÃ§Ã£o de marketing automatizada.",position:"bottom"},{targetId:"quick-actions-grid",title:"AÃ§Ãµes RÃ¡pidas âš¡",content:"Acesse as ferramentas mais importantes com um clique. Gere conteÃºdo, crie anÃºncios ou analise estratÃ©gias instantaneamente.",position:"top"},{targetId:"nav-content-gen",title:"Gerador de ConteÃºdo ðŸ“",content:"Crie posts, legendas e textos para blog em segundos usando IA avanÃ§ada.",position:"right"},{targetId:"nav-ad-studio",title:"EstÃºdio de AnÃºncios ðŸ“¢",content:"Desenvolva criativos e copys persuasivas para campanhas de alta conversÃ£o.",position:"right"},{targetId:"nav-trend-hunter",title:"CaÃ§ador de TendÃªncias ðŸ“ˆ",content:"Descubra o que estÃ¡ em alta no seu nicho e crie conteÃºdo viral antes da concorrÃªncia.",position:"right"},{targetId:"nav-settings",title:"ConfiguraÃ§Ãµes âš™ï¸",content:"Gerencie suas chaves de API, perfil da empresa e preferÃªncias do sistema aqui.",position:"right"}])},[o,R]);const A=async()=>{f(!0);try{const I=await Me();_({type:"success",title:"API Conectada!",message:`Resposta da IA: "${I.substring(0,50)}..."`})}catch(I){_({type:"error",title:"Falha na ConexÃ£o",message:I.message})}finally{f(!1)}};return i.jsxs("div",{className:"animate-fade-in duration-500",children:[i.jsxs("div",{id:"dashboard-header",className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 border-b border-gray-200 dark:border-gray-800 pb-4 gap-4 md:gap-0",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-title",children:d("dashboard.title")}),i.jsx("p",{className:"text-muted mt-1",children:d("dashboard.subtitle")})]}),i.jsx("div",{className:"text-sm text-muted font-medium bg-surface px-3 py-1 rounded-md border border-gray-200 dark:border-gray-800",children:new Date().toLocaleDateString(j,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),r?i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 border-l-4 border-error p-4 rounded-r shadow-sm mb-6",role:"alert",children:[i.jsx("p",{className:"font-bold text-error",children:"System Alert"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:u instanceof Error?u.message:"Failed to load dashboard data."})]}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[i.jsx(X,{title:d("dashboard.total_content"),value:m,description:d("dashboard.total_content_desc"),icon:fe,isLoading:a}),i.jsx(X,{title:d("dashboard.campaigns_card"),value:x,description:d("dashboard.campaigns_desc"),icon:ge,isLoading:a}),i.jsx(X,{title:d("dashboard.scheduled"),value:w,description:d("dashboard.scheduled_desc"),icon:Te,isLoading:a}),i.jsx(X,{title:d("dashboard.trends_card"),value:E,description:d("dashboard.trends_desc"),icon:me,isLoading:a})]}),i.jsxs("section",{className:"bg-surface rounded-xl shadow-card border border-gray-100 dark:border-gray-800 p-8",children:[i.jsx("h3",{className:"text-lg font-bold text-title mb-6",children:d("dashboard.quick_actions")}),i.jsxs("div",{id:"quick-actions-grid",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[i.jsx(T,{onClick:A,isLoading:l,variant:"ghost",size:"lg",className:"w-full justify-start border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 group",children:i.jsxs("span",{className:"flex items-center gap-2 font-bold text-primary",children:[i.jsx(We,{className:"w-5 h-5 text-primary group-hover:text-primary/80 animate-pulse"}),"Testar API (Hello World)"]})}),i.jsxs(T,{onClick:()=>h("ContentGenerator"),variant:"primary",size:"lg",className:"w-full justify-between group",children:[i.jsx("span",{children:d("dashboard.btn_generate")}),i.jsx(fe,{className:"w-5 h-5 opacity-70 group-hover:opacity-100"})]}),i.jsxs(T,{onClick:()=>h("AdStudio"),variant:"outline",size:"lg",className:"w-full justify-between group",children:[i.jsx("span",{children:d("dashboard.btn_ad")}),i.jsx(ge,{className:"w-5 h-5 opacity-70 group-hover:opacity-100"})]}),i.jsxs(T,{onClick:()=>h("AIManager"),variant:"outline",size:"lg",className:"w-full justify-between group",children:[i.jsx("span",{children:d("dashboard.btn_strategy")}),i.jsx(me,{className:"w-5 h-5 opacity-70 group-hover:opacity-100"})]}),i.jsx(T,{onClick:()=>h("TrendHunter"),variant:"ghost",size:"lg",className:"w-full justify-start border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",children:d("dashboard.btn_market")}),i.jsx(T,{onClick:()=>h("CreativeStudio"),variant:"ghost",size:"lg",className:"w-full justify-start border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",children:d("dashboard.btn_media")}),i.jsx(T,{onClick:()=>h("SmartScheduler"),variant:"ghost",size:"lg",className:"w-full justify-start border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",children:d("dashboard.btn_schedule")})]})]})]})};export{ht as default};
