import{S as l,s as L,J as U,ax as B,f as z,ay as G,_ as e,az as T,aA as M,b as u,aB as O,aC as V,aD as J,t as K,aE as q,aF as D,aG as H,aH as Q,a3 as W,R as C,aI as Y}from"./index-Di1jv5f6.js";import{n as S}from"./Input-CRT_4c0B-CcXoGhNA.js";import{m as A}from"./Textarea-gaIhsF-Z-OB2gT--i.js";const ae=()=>{const[r,o]=l.useState(L),[I,g]=l.useState(!0),[P,b]=l.useState(!1),[t,p]=l.useState(""),[f,x]=l.useState(!1),[v,c]=l.useState(!1),[i,n]=l.useState(null),{addToast:s}=U(),{theme:y,toggleTheme:j}=B(),{language:w,setLanguage:N}=z(),h="mock-user-123";l.useEffect(()=>{(async()=>{g(!0);try{const a=await G(h);a&&o(a.businessProfile);const m=localStorage.getItem("vitrinex_gemini_api_key");m&&(p(m),x(!0))}catch{s({type:"error",message:"Falha ao carregar dados iniciais."})}finally{g(!1)}})()},[h,s]);const E=a=>{if(p(a),!a.trim()){n(null);return}a.startsWith("AIzaSy")?a.length<38?n("Chave muito curta."):/\s/.test(a)?n("A chave não pode conter espaços."):n(null):n('Formato inválido. A chave deve começar com "AIzaSy".')},_=async()=>{if(i||!t.trim()){s({type:"warning",message:"Por favor, insira uma chave de API válida."});return}c(!0);try{await C(t.trim()),localStorage.setItem("vitrinex_gemini_api_key",t.trim()),x(!0),s({type:"success",title:"Chave Salva!",message:"O motor de IA foi ativado com sucesso."})}catch(a){s({type:"error",title:"Chave Inválida",message:`A conexão falhou: ${a.message}`}),x(!1)}finally{c(!1)}},R=async()=>{if(!t.trim()){s({type:"warning",message:"Por favor, insira uma chave de API para testar."});return}c(!0);try{const a=await C(t.trim());s({type:"success",title:"Conexão bem-sucedida!",message:`Resposta da IA: "${a.substring(0,50)}..."`})}catch(a){s({type:"error",title:"Falha na Conexão",message:a.message})}finally{c(!1)}},$=async()=>{b(!0);try{await Y(h,{businessProfile:r}),s({type:"success",message:"Perfil do negócio salvo com sucesso!"})}catch(a){s({type:"error",message:`Falha ao salvar perfil: ${a instanceof Error?a.message:String(a)}`})}finally{b(!1)}},F=()=>{const a=localStorage.getItem("vitrinex_gemini_api_key")||t;if(!a){s({type:"warning",message:"Nenhuma chave salva para exportar."});return}const m=new Blob([a],{type:"text/plain"}),k=URL.createObjectURL(m),d=document.createElement("a");d.href=k,d.download="vitrinex_gemini_api_key.txt",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(k),s({type:"info",message:"Backup da chave iniciado."})};return e.jsxs("div",{className:"animate-fade-in duration-500 space-y-10 max-w-3xl mx-auto pb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-title",children:"Configurações"}),e.jsxs("div",{className:"bg-surface p-8 rounded-xl shadow-card border border-border",children:[e.jsxs("h3",{className:"text-xl font-semibold text-title mb-6 flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-primary"})," Motor de Inteligência (Gemini)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-title mb-1.5",children:"Chave API"}),e.jsx("input",{id:"apiKey",type:"password",value:t,onChange:a=>E(a.target.value),placeholder:"AIzaSy...",className:`block w-full px-3 py-2.5 bg-surface border rounded-lg shadow-sm text-body placeholder-muted transition-colors sm:text-sm focus:outline-none ${i?"border-error ring-1 ring-error":"border-border focus:border-primary focus:ring-1 focus:ring-primary"}`}),i&&e.jsx("p",{className:"mt-2 text-xs text-error",children:i})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 flex items-start gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["Recursos avançados como ",e.jsx("strong",{children:"Geração de Vídeo (Veo)"})," e ",e.jsx("strong",{children:"Imagens de Alta Qualidade"})," exigem uma chave de API de um projeto Google Cloud com o faturamento ativo."]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[e.jsxs(u,{onClick:_,isLoading:v&&!i,disabled:!!i||!t.trim(),variant:"primary",className:"w-full sm:w-auto",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),f?"Salvar & Reativar":"Salvar & Ativar"]}),e.jsx(u,{onClick:R,isLoading:v,disabled:!t.trim(),variant:"secondary",className:"w-full sm:w-auto",children:"Testar Conexão"}),e.jsxs(u,{onClick:F,variant:"ghost",className:"w-full sm:w-auto sm:ml-auto",disabled:!f&&!t,children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Exportar Chave"]})]})]})]}),e.jsxs("div",{className:"bg-surface p-8 rounded-xl shadow-card border border-border",children:[e.jsxs("h3",{className:"text-xl font-semibold text-title mb-6 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-primary"})," Perfil do Negócio"]}),I?e.jsx(K,{}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{id:"businessName",label:"Nome da Empresa",value:r.name,onChange:a=>o({...r,name:a.target.value})}),e.jsx(A,{id:"industry",label:"Indústria / Nicho",value:r.industry,onChange:a=>o({...r,industry:a.target.value}),rows:2,placeholder:"Ex: E-commerce de moda sustentável"}),e.jsx(A,{id:"targetAudience",label:"Público-alvo",value:r.targetAudience,onChange:a=>o({...r,targetAudience:a.target.value}),rows:3,placeholder:"Ex: Mulheres de 25-40 anos, conscientes ambientalmente..."}),e.jsx(S,{id:"visualStyle",label:"Estilo Visual",value:r.visualStyle,onChange:a=>o({...r,visualStyle:a.target.value}),placeholder:"Ex: Minimalista, vibrante, retrô..."}),e.jsx(u,{onClick:$,isLoading:P,variant:"primary",className:"w-full sm:w-auto",children:"Salvar Perfil"})]})]}),e.jsxs("div",{className:"bg-surface p-8 rounded-xl shadow-card border border-border",children:[e.jsxs("h3",{className:"text-xl font-semibold text-title mb-6 flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-primary"})," Preferências do Sistema"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-title mb-2 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"})," Tema da Interface"]}),e.jsxs("div",{className:"flex gap-2 rounded-lg bg-background p-1 border border-border w-fit",children:[e.jsxs("button",{onClick:()=>j(),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-colors ${y==="light"?"bg-white text-title shadow-sm":"text-muted hover:text-title"}`,children:[e.jsx(H,{className:"w-4 h-4 inline mr-1.5"})," Claro"]}),e.jsxs("button",{onClick:()=>j(),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-colors ${y==="dark"?"bg-slate-700 text-white shadow-sm":"text-muted hover:text-title"}`,children:[e.jsx(Q,{className:"w-4 h-4 inline mr-1.5"})," Escuro"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-title mb-2 flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"})," Idioma"]}),e.jsxs("div",{className:"flex gap-2 rounded-lg bg-background p-1 border border-border w-fit",children:[e.jsx("button",{onClick:()=>N("pt-BR"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-colors ${w==="pt-BR"?"bg-white text-title shadow-sm":"text-muted hover:text-title"}`,children:"Português"}),e.jsx("button",{onClick:()=>N("en-US"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-colors ${w==="en-US"?"bg-white text-title shadow-sm":"text-muted hover:text-title"}`,children:"English"})]})]})]})]})]})};export{ae as default};
